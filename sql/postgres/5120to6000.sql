--
-- Aipo is a groupware program developed by Aimluck,Inc.
-- Copyright (C) 2004-2011 Aimluck,Inc.
-- http://www.aipo.com
--
-- This program is free software: you can redistribute it and/or modify
-- it under the terms of the GNU Affero General Public License as
-- published by the Free Software Foundation, either version 3 of the
-- License, or (at your option) any later version.
--
-- This program is distributed in the hope that it will be useful,
-- but WITHOUT ANY WARRANTY; without even the implied warranty of
-- MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
-- GNU Affero General Public License for more details.
--
-- You should have received a copy of the GNU Affero General Public License
-- along with this program.  If not, see <http://www.gnu.org/licenses/>.
--

ALTER TABLE EIP_T_ACL_PORTLET_FEATURE ALTER FEATURE_ALIAS_NAME TYPE VARCHAR(99)
;

ALTER TABLE EIP_T_ACL_PORTLET_FEATURE ALTER FEATURE_NAME TYPE VARCHAR(99)
;

ALTER TABLE EIP_T_MAIL_FILTER ALTER FILTER_NAME TYPE VARCHAR(255)
;

ALTER TABLE EIP_T_MAIL_FILTER ALTER FILTER_STRING TYPE VARCHAR(255)
;

ALTER TABLE EIP_T_MAIL_FOLDER ALTER FOLDER_NAME TYPE VARCHAR(128)
;

ALTER TABLE EIP_T_COMMON_CATEGORY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_SCHEDULE ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_TODO_CATEGORY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_TODO ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_M_MAIL_ACCOUNT ALTER SIGNATURE TYPE TEXT
;

ALTER TABLE EIP_T_MAIL ALTER SUBJECT TYPE TEXT
;

ALTER TABLE EIP_T_MAIL ALTER PERSON TYPE TEXT
;

ALTER TABLE EIP_T_MAIL ALTER FILE_PATH TYPE TEXT
;

ALTER TABLE EIP_M_ADDRESSBOOK ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_NOTE ALTER MESSAGE TYPE TEXT
;

ALTER TABLE EIP_T_MSGBOARD_CATEGORY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_MSGBOARD_TOPIC ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_MSGBOARD_FILE ALTER FILE_PATH TYPE TEXT
;

ALTER TABLE EIP_T_BLOG_THEMA ALTER DESCRIPTION TYPE TEXT
;

ALTER TABLE EIP_T_BLOG_ENTRY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_BLOG_COMMENT ALTER COMMENT TYPE TEXT
;

ALTER TABLE EIP_T_BLOG_FILE ALTER FILE_PATH TYPE TEXT
;

ALTER TABLE EIP_T_CABINET_FOLDER ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_CABINET_FILE ALTER FILE_PATH TYPE TEXT
;

ALTER TABLE EIP_T_CABINET_FILE ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_M_FACILITY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_M_FACILITY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_TIMECARD ALTER REASON TYPE TEXT
;

ALTER TABLE EIP_T_EXT_TIMECARD ALTER REASON TYPE TEXT
;

ALTER TABLE EIP_T_EXT_TIMECARD ALTER REMARKS TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_ROUTE ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_ROUTE ALTER ROUTE TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_CATEGORY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_CATEGORY ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_CATEGORY ALTER TEMPLATE TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_REQUEST ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_FILE ALTER FILE_PATH TYPE TEXT
;

ALTER TABLE EIP_T_WORKFLOW_REQUEST_MAP ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_MEMO ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_EVENTLOG ALTER IP_ADDR TYPE TEXT
;

ALTER TABLE EIP_T_EVENTLOG ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_ACL_ROLE ALTER NOTE TYPE TEXT
;

ALTER TABLE EIP_T_ACL_ROLE ALTER NOTE TYPE TEXT
;

CREATE TABLE eip_m_config 
(
    ID serial, 
    KEY varchar(64) NOT NULL, 
    VALUE varchar(255) NULL, 
    PRIMARY KEY (ID)
);

CREATE TABLE application 
(
    ID serial, 
    APP_ID varchar(255) NOT NULL, 
    CONSUMER_KEY varchar(99) NULL, 
    CONSUMER_SECRET varchar(99) NULL, 
    STATUS integer NULL, 
    TITLE varchar(99) NULL, 
    URL varchar(255) NOT NULL, 
    SUMMARY varchar(255) NULL, 
    DESCRIPTION TEXT NULL, 
    CREATE_DATE DATE,
    UPDATE_DATE TIMESTAMP,
    PRIMARY KEY (ID)
);

CREATE TABLE oauth_consumer 
(
    ID serial, 
    APP_ID integer NULL,
    CONSUMER_KEY varchar(255) NULL, 
    CONSUMER_SECRET varchar(255) NULL, 
    NAME varchar(99) NULL, 
    TYPE varchar(99) NULL, 
    CREATE_DATE DATE,
    UPDATE_DATE TIMESTAMP,
    FOREIGN KEY (APP_ID) REFERENCES application (ID) ON DELETE CASCADE,
    PRIMARY KEY (ID)
);

CREATE TABLE container_config 
(
    ID serial, 
    KEY varchar(64) NOT NULL, 
    VALUE varchar(255) NULL, 
    PRIMARY KEY (ID)
);

CREATE TABLE oauth_token 
(
    KEY integer NOT NULL, 
    ACCESS_TOKEN varchar(255) NULL, 
    TOKEN_SECRET varchar(255) NULL, 
    SESSION_HANDLE varchar(255) NULL, 
    TOKEN_EXPIRE_MILIS integer NULL,
    PRIMARY KEY (KEY)
);

CREATE TABLE activity 
(
    ID serial, 
    LOGIN_NAME varchar(32) NOT NULL, 
    APP_ID varchar(255) NOT NULL, 
    EXTERNAL_ID varchar(99) NULL, 
    TITLE varchar(99) NOT NULL, 
    BODY TEXT NULL, 
    PORTLET_PARAMS varchar(99) NULL, 
    PRIORITY float NULL, 
    UPDATE_DATE TIMESTAMP,
    PRIMARY KEY (ID)
);

CREATE TABLE activity_map 
(
    ID serial, 
    ACTIVITY_ID integer NULL, 
    LOGIN_NAME varchar(32) NOT NULL, 
    IS_READ integer NULL, 
    PRIMARY KEY (ID)
);

CREATE TABLE app_data 
(
    ID serial, 
    APP_ID varchar(255) NOT NULL, 
    LOGIN_NAME varchar(32) NOT NULL, 
    KEY varchar(99) NOT NULL, 
    VALUE TEXT NULL, 
    PRIMARY KEY (ID)
);

CREATE TABLE JETSPEED_USER_PROFILE (
    PSML_ID serial,
    USER_NAME VARCHAR(32) NULL,
    COUNTRY VARCHAR(2) NULL,
    LANGUAGE VARCHAR(2) NULL,
    MEDIA_TYPE VARCHAR(99) NULL,
    PAGE VARCHAR(99) NULL,
    PROFILE bytea NULL,
    PRIMARY KEY (PSML_ID),
    UNIQUE (USER_NAME, MEDIA_TYPE, LANGUAGE, COUNTRY, PAGE)
);

CREATE TABLE JETSPEED_GROUP_PROFILE (
    PSML_ID serial,
    GROUP_NAME VARCHAR(99) NULL,
    COUNTRY VARCHAR(2) NULL,
    LANGUAGE VARCHAR(2) NULL,
    MEDIA_TYPE VARCHAR(99) NULL,
    PAGE VARCHAR(99) NULL,
    PROFILE bytea NULL,
    PRIMARY KEY (PSML_ID),
    UNIQUE (GROUP_NAME, MEDIA_TYPE, LANGUAGE, COUNTRY, PAGE)
);

CREATE TABLE JETSPEED_ROLE_PROFILE (
    PSML_ID serial,
    ROLE_NAME VARCHAR(99) NULL,
    COUNTRY VARCHAR(2) NULL,
    LANGUAGE VARCHAR(2) NULL,
    MEDIA_TYPE VARCHAR(99) NULL,
    PAGE VARCHAR(99) NULL,
    PROFILE bytea NULL,
    PRIMARY KEY (PSML_ID),
    UNIQUE (ROLE_NAME, MEDIA_TYPE, LANGUAGE, COUNTRY, PAGE)
);

