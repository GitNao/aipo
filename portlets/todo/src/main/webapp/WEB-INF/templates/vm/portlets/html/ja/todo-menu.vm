#*
 * Aipo is a groupware program developed by Aimluck,Inc.
 * Copyright (C) 2004-2010 Aimluck,Inc.
 * http://aipostyle.com/
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *#

## ---------------------------------------------------------------------------
<script language="JavaScript" type="text/javascript">
//<![CDATA[

dojo.require("aimluck.widget.Menu");

dojo.addOnLoad(function () {

    var subMenu =
        [
            {
                caption: "ToDo",
                iconClass: "menuBarIconList",
                url: "$!jslink.getPortletById($!portlet.ID).addQueryData('eventSubmit_doTodo_list','1')",
                submenu:
                [
                    {   caption: "ToDo一覧を見る", iconClass: "menuBarIconList", url: "$!jslink.getPortletById($!portlet.ID).addQueryData('eventSubmit_doTodo_list','1')"    },
                    {   caption: "ToDoを追加する", iconClass: "menuBarIconList", url: "javascript:aipo.common.showDialog('$!jslink.getPortletById($!portlet.ID).addQueryData("template","ToDoFormScreen").addQueryData("entityid","new")','$!portlet.ID',aipo.todo.onLoadTodoDialog);"    }
                ]
            },
            {
                caption: "カテゴリ",
                iconClass: "menuBarIconList",
                url: "$!jslink.getPortletById($!portlet.ID).addQueryData('eventSubmit_doTodo_category_list','1')" ,
                submenu:
                [
                    {   caption: "カテゴリ一覧を見る", iconClass: "menuBarIconList", url: "$!jslink.getPortletById($!portlet.ID).addQueryData('eventSubmit_doTodo_category_list','1')"    },
                    {   caption: "カテゴリを追加する", iconClass: "menuBarIconAdd" , url: "javascript:aipo.common.showDialog('$!jslink.getPortletById($!portlet.ID).addQueryData("template","ToDoCategoryFormScreen").addQueryData("entityid","new")','$!portlet.ID',aipo.todo.onLoadCategoryDialog);"},
                ]
            },
            {
                caption: "進捗状況を見る",
                iconClass: "menuBarIconList",
                url: "$!jslink.getPortletById($!portlet.ID).addQueryData('eventSubmit_doTodo_public_list','1')"
            }
	    ];
        
        if(aipo.todo.menuSelected == "undefined"){
          aipo.todo.menuSelected = -1;  
        }
        var menubar = new aimluck.widget.Menubar({id: "mbar", items: subMenu, selectedIndex:aipo.todo.menuSelected}, "portletMenu");

});

//]]>
</script> 
