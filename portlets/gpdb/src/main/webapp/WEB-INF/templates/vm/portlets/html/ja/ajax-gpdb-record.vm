#*
 * Aipo is a groupware program developed by Aimluck,Inc.
 * Copyright (C) 2004-2011 Aimluck,Inc.
 * http://www.aipo.com
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU Affero General Public License as
 * published by the Free Software Foundation, either version 3 of the
 * License, or (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU Affero General Public License for more details.
 *
 * You should have received a copy of the GNU Affero General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 *
 * General Purpose Database Portlet was developed by Advance,Inc.
 * http://www.a-dvance.co.jp/
 *#
## ---------------------------------------------------------------------------
#set ($indicator_id = "indicator-list-")
## ---------------------------------------------------------------------------
#AUIcontentsAreaHeader()

#if(!$result.GpdbAllList || $result.GpdbAllList.size()==0)
	<div class="auiBlankBox">データベースの管理よりデータベースを追加してください。</div>
#elseif(!$result.List)
	<div class="auiBlankBox">データベースを選択してください。</div>
#elseif($result.List.size() == 0)
	<div class="auiBlankBox">指定された条件に該当するレコードはありません。</div>
#else

<h2>$result.Gpdb.GpdbName</h2>
<div class="auiSummaryMeta clearfix">
<div class="floatLeft ml10" style="padding-top: 0.4em;">#ALajaxIndicator("search-${indicator_id}" "$!{portlet.ID}" "&nbsp;")</div>
</div>

#ALajaxIndicator("${indicator_id}" "$!{portlet.ID}" "")
<div id="listmessageDiv"></div>
#ALajaxlistformheader('データ')
	<div class="auiSummaryMeta clearfix">
		<div class="floatLeft">
			#AUIajaxbuttonCheckboxDelete("削除する" "$!jslink.getPortletById($!portlet.ID).addQueryData('template','GpdbRecordFormJSONScreen').addQueryData('mode','multi_delete')" "$indicator_id" "$!portlet.ID" "aipo.gpdb.onListReceiveMessage")
		</div>
		#AUIajaxpageview('GpdbRecordListScreen' $result)
	</div>
	#AUIrowTableWide()
	<tr>
	#ALtdheadAtt("#ALswitchCheckbox()" "class='thin center'")
	#set($titleItemId = "")
	#foreach($item in $result.GpdbItemList)
		#if ($item.ListFlg.toString()=='t')
			<th>#ALajaxsort($!item.GpdbItemId $!item.GpdbItemName $result 'GpdbRecordListScreen')</th>
		#end
		#if ($item.TitleFlg.toString()=='t')
			#set($titleItemId = $!item.GpdbItemId.toString())
		#end
	#end
	</tr>
	#set($recordNo = "")
	#foreach($record in $result.List)
		#if($recordNo.toString() != $record.RecordNo.toString())
			#if($velocityCount > 1)
				</tr>
			#end
			<tr>
			#ALtdcellAtt("<input name='check$!record.RecordNo' type='checkbox' value='$!record.RecordNo'/>" 'class="center"')
			#set($recordNo = $record.RecordNo.toString())
		#end
		#if ($titleItemId.toString() == $record.GpdbItemId.toString())
			#ALtdcellheader()
			<a href="javascript:void(0);" onclick="aipo.common.showDialog('$!utils.escapeXML($!jslink.getPortletById($!portlet.ID).addQueryData("template","GpdbRecordDetailScreen").addQueryData("entityid",$record.RecordNo))');">$!record.DispValue</a>
			#ALtdcellfooter()
		#else
			#ALtdcell($!record.DispValue)
		#end
		#if($velocityCount == $result.List.size())
			##最終行の場合
			<!--最後！-->
			</tr>
		#end
	#end
	#AUItablefooter()
	<div class="auiSummaryMeta clearfix">
		<div class="floatLeft">
			#AUIajaxbuttonCheckboxDelete("削除する" "$!jslink.getPortletById($!portlet.ID).addQueryData('template','GpdbRecordFormJSONScreen').addQueryData('mode','multi_delete')" "$indicator_id" "$!portlet.ID" "aipo.gpdb.onListReceiveMessage")
		</div>
	#AUIajaxpageview('GpdbRecordListScreen' $result)
	</div>
#ALformfooter()
#end
#AUIcontentsAreaFooter()
#parse("/portlets/html/ja/gpdb-widgets.vm")

